<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salih Tekin AyvacÄ± | Portfolyo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <script src="avrgirl-arduino.global.js"></script>
</head>
<body>

    <nav class="sidebar">
        <div class="profile-img-container">
            <img src="https://github.com/SalihAyvaci21.png" alt="Profile" class="profile-img">
        </div>
        <div class="name">Salih Tekin AyvacÄ±</div>
        <div class="title">GÃ¶mÃ¼lÃ¼ Sistemler & FPGA</div>

        <div class="nav-menu">
            <div class="nav-btn active" onclick="showSection('about', this)"><i class="fas fa-user-astronaut"></i> HakkÄ±mda</div>
            <div class="nav-btn" onclick="showSection('projects', this)"><i class="fas fa-code-branch"></i> Projelerim</div>
            <div class="nav-btn" onclick="showSection('games', this)"><i class="fas fa-gamepad"></i> Oyun AlanÄ±</div>
            <div class="nav-btn" onclick="showSection('iot', this)"><i class="fas fa-robot"></i> Robotik Lab</div>
        </div>

        <div class="social-links">
            <a href="https://github.com/SalihAyvaci21" target="_blank" class="social-icon"><i class="fab fa-github"></i></a>
            <a href="https://linkedin.com/in/salih-tekin-ayvaci" target="_blank" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
        </div>
    </nav>

    <main class="main-content">
        
        <section id="about" class="active">
            <h1>Merhaba, Ben Salih ðŸ‘‹</h1>
            <p>Elektronik ve yazÄ±lÄ±m dÃ¼nyasÄ±nda sÄ±nÄ±rlarÄ± zorlamayÄ± seven bir geliÅŸtiriciyim. Ã–zellikle <strong>FPGA</strong>, <strong>Mikrodenetleyiciler</strong> ve <strong>SensÃ¶r EntegrasyonlarÄ±</strong> Ã¼zerine Ã§alÄ±ÅŸÄ±yorum.</p>
            
            <h2>ðŸ›  Yeteneklerim</h2>
            <div class="grid">
                <div class="card">
                    <h3>YazÄ±lÄ±m & Oyun</h3>
                    <div style="margin-top:15px;">
                        <div class="skill-bar"><div class="skill-info"><span>C / C++ (Embedded)</span><span>90%</span></div><div class="progress-bg"><div class="progress" style="width: 90%"></div></div></div>
                        <div class="skill-bar"><div class="skill-info"><span>Verilog / VHDL</span><span>75%</span></div><div class="progress-bg"><div class="progress" style="width: 75%"></div></div></div>
                        <div class="skill-bar"><div class="skill-info"><span>Lua / Unity</span><span>60%</span></div><div class="progress-bg"><div class="progress" style="width: 60%"></div></div></div>
                    </div>
                </div>
                <div class="card">
                    <h3>DonanÄ±m & Kartlar</h3>
                    <div class="tech-stack" style="margin-top:15px;">
                        <span class="tech-tag">Tang Nano 9K</span>
                        <span class="tech-tag">Gatemate CCGM1A1</span>
                        <span class="tech-tag">STM32</span>
                        <span class="tech-tag">RPi Pico</span>
                        <span class="tech-tag">Arduino Uno</span>
                        <span class="tech-tag">ESP32</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects">
            <h1>TÃ¼m Projelerim</h1>
            <div id="repos-container" class="grid">
                <div class="loading-text">GitHub'dan veriler Ã§ekiliyor...</div>
            </div>
        </section>

        <section id="games">
            <h1>Mini Arcade</h1>
            <div class="game-container-split">
                <div class="game-list">
                    <div class="card game-card" onclick="startGame('snake', this)">
                        <h3><i class="fas fa-worm"></i> Cyber Snake</h3>
                    </div>
                    <div class="card game-card" onclick="startGame('tetris', this)">
                        <h3><i class="fas fa-cubes"></i> Neon Blocks</h3>
                    </div>
                    <div class="card game-card" onclick="startGame('maze', this)">
                        <h3><i class="fas fa-ghost"></i> Maze Chase</h3>
                    </div>
                </div>
                <div class="game-stage">
                    <div id="scoreBoard" class="score-board">SKOR: 0</div>
                    <canvas id="gameCanvas" width="400" height="400"></canvas>
                    <div id="gameControls" class="game-controls">Oynamak iÃ§in bir oyun seÃ§in</div>
                </div>
            </div>
        </section>

        <section id="iot">
            <h1>ðŸ¤– Robotik Kodlama LaboratuvarÄ±</h1>
            <p>Ä°ster C++ kodu yazÄ±p yÃ¼kleyin, ister bloklarla kontrol edin.</p>
            
            <div class="card" style="border-top: 4px solid #00bcd4; margin-bottom: 20px;">
                <div class="card-header" style="border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 10px;">
                    <h3><i class="fas fa-code"></i> C++ Kod EditÃ¶rÃ¼</h3>
                </div>

                <div style="position: relative;">
                    <textarea id="cppEditor" style="width: 100%; height: 200px; background: #111; color: #0f0; border: 1px solid #444; padding: 10px; font-family: 'Consolas', monospace; border-radius: 4px; resize: vertical;">
void setup() {
  pinMode(13, OUTPUT);
}

void loop() {
  digitalWrite(13, HIGH);
  delay(100);
  digitalWrite(13, LOW);
  delay(100);
}
                    </textarea>
                    <div id="statusLabelNew" style="margin-top: 5px; font-size: 0.9rem; color: #888;">Durum: Bekleniyor...</div>
                </div>

                <div class="header-controls" style="justify-content: flex-start; margin-top: 15px;">
                    <button id="btnCompileNew" class="serial-btn" style="background:#00bcd4; color:black;" onclick="runCompiler()">
                        <i class="fas fa-cog"></i> 1. Derle (Server)
                    </button>
                    
                    <button id="btnUploadNew" class="serial-btn off" style="background:#555; color:white; cursor: not-allowed;" disabled onclick="runUploader()">
                        <i class="fas fa-upload"></i> 2. Kodu YÃ¼kle
                    </button>
                </div>
            </div>

            <div class="card" style="border-top: 4px solid var(--primary);">
                <div class="card-header" style="border-bottom: 1px solid #333; padding-bottom: 15px; margin-bottom: 0;">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <h3><i class="fas fa-cubes"></i> Blok StÃ¼dyosu & Kontrol</h3>
                        <span id="statusBadge" class="status-badge"><i class="fas fa-circle" style="font-size:0.6rem;"></i> BaÄŸlantÄ± Yok</span>
                    </div>
                    
                    <div class="header-controls">
                        <button id="btnQuickTest" class="serial-btn" style="background:#7000ff; color:white;" onclick="runQuickTest()">
                            <i class="fas fa-microchip"></i> Test Firmware YÃ¼kle
                        </button>
                        
                        <button id="btnConnect" class="serial-btn connect" onclick="connectSerial()">
                            <i class="fas fa-plug"></i> BaÄŸlan (Bloklar Ä°Ã§in)
                        </button>
                        <button id="btnDisconnect" class="serial-btn off" onclick="disconnectSerial()" style="display:none; background:#ff0055; color:white;">
                            <i class="fas fa-power-off"></i> Kes
                        </button>
                    </div>
                </div>

                <div class="iot-panel">
                    
                    <div class="block-list">
                        <div class="code-block" style="background: linear-gradient(90deg, #4C97FF, #2D7DE0);">
                            <i class="fas fa-lightbulb"></i>
                            <span>Pin</span>
                            <select id="pinSelectOn" class="block-input"><option value="13">13</option><option value="12">12</option><option value="11">11</option></select>
                            <span>LED'ini</span> <strong>YAK</strong>
                            <button class="run-btn" onclick="runBlock('ON')"><i class="fas fa-play"></i></button>
                        </div>

                        <div class="code-block" style="background: linear-gradient(90deg, #FF6680, #E02D4C);">
                            <i class="far fa-lightbulb"></i>
                            <span>Pin</span>
                            <select id="pinSelectOff" class="block-input"><option value="13">13</option><option value="12">12</option><option value="11">11</option></select>
                            <span>LED'ini</span> <strong>SÃ–NDÃœR</strong>
                            <button class="run-btn" onclick="runBlock('OFF')"><i class="fas fa-play"></i></button>
                        </div>
                    </div>

                    <div class="console-wrapper">
                        <div class="console-header"><span><i class="fas fa-terminal"></i> Seri Port Konsolu</span><span style="font-size:0.7rem; opacity:0.7;">115200 Baud</span></div>
                        <div id="serialConsole" class="serial-console">
                            > Sistem hazÄ±r.<br>> Kod yazÄ±p yÃ¼kleyebilir veya "BaÄŸlan" diyerek bloklarÄ± kullanabilirsiniz.
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>
    
    <script src="script.js"></script>

    <script>
    // --- SERVER & COMPILER KODLARI ---
    // DeÄŸiÅŸkenleri global scope'da Ã§akÄ±ÅŸmayacak ÅŸekilde isimlendirdim
    let globalHexData = null; 

    // 1. Derleme Fonksiyonu
    async function runCompiler() {
        const editorVal = document.getElementById('cppEditor').value;
        const statusLbl = document.getElementById('statusLabelNew');
        const btnUpload = document.getElementById('btnUploadNew');

        console.log("Derleme iÅŸlemi baÅŸlatÄ±ldÄ±..."); // Konsoldan takip et
        statusLbl.innerText = "Durum: Sunucuda derleniyor... (LÃ¼tfen bekleyin)";
        statusLbl.style.color = "#40c4ff";

        try {
            // RENDER SUNUCUSUNA Ä°STEK
            const response = await fetch('https://arduino-backend-ajkr.onrender.com/compile', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code: editorVal })
            });

            if (!response.ok) throw new Error("Sunucu HatasÄ±: " + response.statusText);

            const data = await response.json();

            if (data.hex) {
                globalHexData = data.hex;
                statusLbl.innerText = "Durum: BAÅžARILI! Kodu yÃ¼kleyebilirsiniz.";
                statusLbl.style.color = "#00e676";
                
                // YÃ¼kle butonunu aktif et
                btnUpload.disabled = false;
                btnUpload.style.background = "#ff9800";
                btnUpload.style.cursor = "pointer";
                btnUpload.classList.remove('off');
            } else {
                throw new Error("Hex kodu oluÅŸturulamadÄ±.");
            }

        } catch (err) {
            console.error("Derleme HatasÄ±:", err);
            statusLbl.innerText = "Hata: " + err.message;
            statusLbl.style.color = "#ff5252";
            alert("Derleme HatasÄ±: " + err.message + "\n(F12 Konsolu kontrol edin)");
        }
    }

    // 2. YÃ¼kleme Fonksiyonu (Derlenen Kodu)
    async function runUploader() {
        if (!globalHexData) {
            alert("Ã–nce kodu derlemelisiniz!");
            return;
        }
        
        const statusLbl = document.getElementById('statusLabelNew');
        statusLbl.innerText = "Durum: Port seÃ§iliyor...";

        try {
            if (!navigator.serial) {
                alert("TarayÄ±cÄ±nÄ±z Web Serial API desteklemiyor. Chrome veya Edge kullanÄ±n.");
                return;
            }

            await navigator.serial.requestPort();
            statusLbl.innerText = "Durum: YÃ¼kleniyor...";

            const blob = new Blob([globalHexData], { type: 'application/octet-stream' });
            const reader = new FileReader();

            reader.onload = function(event) {
                const fileBuffer = event.target.result;
                // AvrgirlArduino kÃ¼tÃ¼phanesinin yÃ¼klÃ¼ olup olmadÄ±ÄŸÄ±nÄ± kontrol edelim
                if (typeof AvrgirlArduino === 'undefined') {
                    alert("HATA: 'avrgirl-arduino.global.js' kÃ¼tÃ¼phanesi yÃ¼klenemedi!");
                    return;
                }

                const avrgirl = new AvrgirlArduino({ board: 'uno', debug: true });

                avrgirl.flash(fileBuffer, (error) => {
                    if (error) {
                        console.error("Flash HatasÄ±:", error);
                        statusLbl.innerText = "YÃ¼kleme HatasÄ±: " + error.message;
                        statusLbl.style.color = "#ff5252";
                    } else {
                        statusLbl.innerText = "BAÅžARILI! Kod Arduino'ya yÃ¼klendi.";
                        statusLbl.style.color = "#00e676";
                    }
                });
            };
            reader.readAsArrayBuffer(blob);
        } catch (err) {
            console.error(err);
            statusLbl.innerText = "Ä°ptal edildi veya Hata: " + err;
        }
    }

    // 3. Test Firmware (HÄ±zlÄ± Blink) Fonksiyonu
    function runQuickTest() {
        console.log("HÄ±zlÄ± test baÅŸlatÄ±lÄ±yor...");
        const defaultHex = [
            ":100000000C945C000C946E000C946E000C946E00CA",
            ":100010000C946E000C946E000C946E000C946E00A8",
            ":100020000C946E000C946E000C946E000C946E0098",
            ":100030000C946E000C946E000C946E000C946E0088",
            ":100040000C9488000C946E000C946E000C946E005E",
            ":100050000C946E000C946E000C946E000C946E0068",
            ":100060000C946E000C946E00000000080002010069",
            ":100070000003040700000000000000000102040863",
            ":100080001020408001020408102001020408102002",
            ":10009000040404040404040402020202020203032E",
            ":1000A0000303030300000000250028002B000000CC",
            ":1000B0000000240027002A0011241FBECFEFD8E043",
            ":1000C000DEBFCDBF21E0A0E0B1E001C01D92A930AC",
            ":1000D000B207E1F70E94F1010C9401020C940000B8",
            ":1000E00061E08DE00C94810161E08DE00E94BA0135",
            ":1000F00068EE73E080E090E00E94F50060E08DE043",
            ":100100000E94BA0168EE73E080E090E00C94F50084",
            ":100110001F920F920FB60F9211242F933F938F933C",
            ":100120009F93AF93BF938091010190910201A091A1",
            ":100130000301B09104013091000123E0230F2D371A",
            ":1001400020F40196A11DB11D05C026E8230F0296DB",
            ":10015000A11DB11D20930001809301019093020124",
            ":10016000A0930301B09304018091050190910601D1",
            ":10017000A0910701B09108010196A11DB11D8093C6",
            ":10018000050190930601A0930701B0930801BF9168",
            ":10019000AF919F918F913F912F910F900FBE0F9034",
            ":1001A0001F9018953FB7F894809105019091060132",
            ":1001B000A0910701B091080126B5A89B05C02F3F6B",
            ":1001C00019F00196A11DB11D3FBF6627782F892F19",
            ":1001D0009A2F620F711D811D911D42E0660F771FDE",
            ":1001E000881F991F4A95D1F70895CF92DF92EF9219",
            ":1001F000FF92CF93DF936B017C010E94D200EB0151",
            ":10020000C114D104E104F10489F00E9400020E94AB",
            ":10021000D2006C1B7D0B683E734090F381E0C81ADE",
            ":10022000D108E108F108C851DC4FEACFDF91CF9146",
            ":10023000FF90EF90DF90CF900895789484B582601E",
            ":1002400084BD84B5816084BD85B5826085BD85B57A",
            ":10025000816085BDEEE6F0E0808181608083E1E829",
            ":10026000F0E0108280818260808380818160808361",
            ":10027000E0E8F0E0808181608083E1EBF0E0808164",
            ":1002800084608083E0EBF0E0808181608083EAE736",
            ":10029000F0E08081846080838081826080838081BF",
            ":1002A000816080838081806880831092C10008957E",
            ":1002B000833081F028F4813099F08230A1F00895E4",
            ":1002C0008730A9F08830B9F08430D1F48091800073",
            ":1002D0008F7D03C0809180008F7780938000089588",
            ":1002E00084B58F7702C084B58F7D84BD08958091D9",
            ":1002F000B0008F7703C08091B0008F7D8093B000F5",
            ":100300000895CF93DF9390E0FC01E458FF4F2491D0",
            ":10031000FC01E057FF4F8491882349F190E0880F5A",
            ":10032000991FFC01E255FF4FA591B4918C559F4F49",
            ":10033000FC01C591D4919FB7611108C0F8948C91CC",
            ":10034000209582238C93888182230AC0623051F4E5",
            ":10035000F8948C91322F309583238C938881822B53",
            ":10036000888304C0F8948C91822B8C939FBFDF917B",
            ":10037000CF9108950F931F93CF93DF931F92CDB723",
            ":10038000DEB7282F30E0F901E859FF4F8491F901D9",
            ":10039000E458FF4F1491F901E057FF4F04910023F7",
            ":1003A000C9F0882321F069830E9458016981E02FF8",
            ":1003B000F0E0EE0FFF1FEC55FF4FA591B4919FB7F2",
            ":1003C000F8948C91611103C01095812301C0812B99",
            ":1003D0008C939FBF0F90DF91CF911F910F91089544",
            ":1003E00008950E941D010E94F0010E947000C0E06B",
            ":1003F000D0E00E9474002097E1F30E940000F9CF42",
            ":060400000895F894FFCFFF",
            ":00000001FF"
        ].join('\n').trim();

        const blob = new Blob([defaultHex], { type: 'application/octet-stream' });
        const reader = new FileReader();

        reader.onload = function(event) {
            const fileBuffer = event.target.result;
            // Avrgirl kontrolÃ¼
            if (typeof AvrgirlArduino === 'undefined') {
                alert("HATA: KÃ¼tÃ¼phane bulunamadÄ±!");
                return;
            }
            const avrgirl = new AvrgirlArduino({ board: 'uno', debug: true });
            avrgirl.flash(fileBuffer, (error) => {
                if(error) alert("Hata: " + error.message);
                else alert("Test Firmware YÃ¼klendi!");
            });
        };
        reader.readAsArrayBuffer(blob);
    }
    </script>
</body>
</html>






